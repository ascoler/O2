<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O2 - Music Recommendation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f0f0f;
            color: #e0e0e0;
            background: linear-gradient(135deg, #1a1a1a 0%, #0d0d0d 100%);
            min-height: 100vh;
        }
        
        .music-card {
            background: rgba(30, 30, 30, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .music-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            border-color: rgba(99, 102, 241, 0.5);
        }
        
        .platform-btn {
            transition: all 0.2s ease;
        }
        
        .platform-btn:hover {
            transform: scale(1.1);
        }
        
        .search-input:focus {
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.5);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
            100% {
                opacity: 0.6;
            }
        }
        
        .tag {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .similarity-high {
            background-color: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }
        
        .similarity-medium {
            background-color: rgba(234, 179, 8, 0.2);
            color: #eab308;
        }
        
        .similarity-low {
            background-color: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="flex flex-col items-center mb-8">
            <div class="flex items-center mb-4">
                <i class="fas fa-music text-4xl text-indigo-500 mr-3"></i>
                <h1 class="text-4xl font-bold bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent">O2 Music Finder</h1>
            </div>
            <p class="text-gray-400 text-center max-w-lg">Find music similar to your taste. Search by artist, song, mood, or music characteristics.</p>
        </header>
        
        <!-- Search Section -->
        <section class="max-w-2xl mx-auto mb-8">
            <div class="relative">
                <input 
                    type="text" 
                    id="musicQueryInput" 
                    placeholder="Example: 'energetic dance music in major key' or 'Taylor Swift song with high energy'" 
                    class="w-full px-6 py-4 rounded-full bg-gray-800 border border-gray-700 focus:border-indigo-500 focus:outline-none text-white placeholder-gray-500 transition-all duration-200 search-input"
                >
                <button 
                    id="searchBtn"
                    class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-2 rounded-full hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 flex items-center"
                >
                    <span>Find Music</span>
                    <i class="fas fa-search ml-2"></i>
                </button>
            </div>
            <div class="mt-4 text-center text-gray-500 text-sm">
                <p>Try searching by: artist name, song title, mood, energy level, key, or danceability</p>
            </div>
        </section>
        
        <!-- Results Section -->
        <section id="resultsSection" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold text-gray-300">Recommended Tracks</h2>
                <div class="text-gray-400" id="resultCount"></div>
            </div>
            
            <div id="resultsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Results will be inserted here by JavaScript -->
            </div>
        </section>
        
        <!-- Loading State -->
        <section id="loadingSection" class="hidden flex flex-col items-center justify-center py-12">
            <div class="pulse">
                <i class="fas fa-compact-disc text-6xl text-indigo-500 animate-spin mb-4"></i>
            </div>
            <p class="text-gray-400">Analyzing your music taste...</p>
        </section>
        
        <!-- Error State -->
        <section id="errorSection" class="hidden flex flex-col items-center justify-center py-12">
            <i class="fas fa-exclamation-triangle text-5xl text-red-500 mb-4"></i>
            <p class="text-gray-400 text-center max-w-md" id="errorText">Error message will appear here</p>
            <button id="tryAgainBtn" class="mt-4 px-4 py-2 bg-gray-700 rounded-md hover:bg-gray-600 transition">Try Again</button>
        </section>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchBtn = document.getElementById('searchBtn');
            const musicQueryInput = document.getElementById('musicQueryInput');
            const resultsSection = document.getElementById('resultsSection');
            const loadingSection = document.getElementById('loadingSection');
            const errorSection = document.getElementById('errorSection');
            const resultsContainer = document.getElementById('resultsContainer');
            const resultCount = document.getElementById('resultCount');
            const tryAgainBtn = document.getElementById('tryAgainBtn');
            
            // Function to generate music service links
            function generateMusicLinks(trackName, artistName) {
                const query = encodeURIComponent(`${trackName} ${artistName}`);
                return {
                    youtube: `https://www.youtube.com/results?search_query=${query}`,
                    spotify: `https://open.spotify.com/search/${query}`,
                    apple: `https://music.apple.com/search?term=${query}`,
                    soundcloud: `https://soundcloud.com/search?q=${query}`
                };
            }
            
            // Function to get similarity class based on value
            function getSimilarityClass(similarity) {
                if (similarity >= 0.8) return 'similarity-high';
                if (similarity >= 0.6) return 'similarity-medium';
                return 'similarity-low';
            }
            
            // Function to display results
            function displayResults(recommendations) {
                resultsContainer.innerHTML = '';
                
                recommendations.forEach((song, index) => {
                    const card = document.createElement('div');
                    card.className = 'music-card rounded-xl p-5 overflow-hidden';
                    
                    const links = generateMusicLinks(song.title, song.artist);
                    const similarityClass = getSimilarityClass(song.similarity);
                    
                    card.innerHTML = `
                        <div class="flex items-start mb-4">
                            <div class="w-16 h-16 rounded-md mr-4 flex items-center justify-center bg-indigo-900">
                                <i class="fas fa-music text-indigo-400"></i>
                            </div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-white text-lg mb-1">${song.title}</h3>
                                <p class="text-gray-400 text-sm mb-2">${song.artist}</p>
                                <div class="flex flex-wrap">
                                    <span class="tag ${similarityClass}">
                                        <i class="fas fa-heart mr-1"></i> ${(song.similarity * 100).toFixed(1)}% match
                                    </span>
                                    <span class="tag bg-indigo-900 text-indigo-300">
                                        <i class="fas fa-bolt mr-1"></i> ${song.energy}%
                                    </span>
                                    <span class="tag bg-purple-900 text-purple-300">
                                        <i class="fas fa-shoe-prints mr-1"></i> ${song.danceability}%
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center mt-4">
                            <div class="text-xs text-gray-500">
                                Key: ${song.key} â€¢ ${song.mode}
                            </div>
                            <div class="flex space-x-3">
                                <a href="${links.youtube}" target="_blank" class="platform-btn text-red-500 hover:text-red-400" title="Search on YouTube">
                                    <i class="fab fa-youtube text-xl"></i>
                                </a>
                                <a href="${links.spotify}" target="_blank" class="platform-btn text-green-500 hover:text-green-400" title="Search on Spotify">
                                    <i class="fab fa-spotify text-xl"></i>
                                </a>
                                <a href="${links.apple}" target="_blank" class="platform-btn text-white hover:text-gray-300" title="Search on Apple Music">
                                    <i class="fab fa-apple text-xl"></i>
                                </a>
                                <a href="${links.soundcloud}" target="_blank" class="platform-btn text-orange-500 hover:text-orange-400" title="Search on SoundCloud">
                                    <i class="fab fa-soundcloud text-xl"></i>
                                </a>
                            </div>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(card);
                });
                
                resultCount.textContent = `${recommendations.length} results found`;
                resultsSection.classList.remove('hidden');
            }
            
            // Function to show error
            function showError(message) {
                errorSection.classList.remove('hidden');
                loadingSection.classList.add('hidden');
                resultsSection.classList.add('hidden');
                document.getElementById('errorText').textContent = message;
            }
            
            // Function to search for music (simulated)
            function searchMusic(query) {
                // In a real application, this would be an API call to your backend
                console.log(`Searching for: ${query}`);
                
                // Simulate API response delay
                setTimeout(() => {
                    // Sample response data - in a real app, this would come from your backend
                    const mockResponse = [
                        {
                            title: "Blinding Lights",
                            artist: "The Weeknd",
                            key: "C#",
                            mode: "Major",
                            energy: 85,
                            danceability: 76,
                            similarity: 0.92
                        },
                        {
                            title: "Levitating",
                            artist: "Dua Lipa",
                            key: "F#",
                            mode: "Minor",
                            energy: 82,
                            danceability: 88,
                            similarity: 0.87
                        },
                        {
                            title: "Stay",
                            artist: "The Kid LAROI, Justin Bieber",
                            key: "D",
                            mode: "Major",
                            energy: 78,
                            danceability: 72,
                            similarity: 0.83
                        },
                        {
                            title: "Good 4 U",
                            artist: "Olivia Rodrigo",
                            key: "F#",
                            mode: "Minor",
                            energy: 89,
                            danceability: 81,
                            similarity: 0.79
                        },
                        {
                            title: "Save Your Tears",
                            artist: "The Weeknd",
                            key: "D",
                            mode: "Major",
                            energy: 76,
                            danceability: 74,
                            similarity: 0.75
                        }
                    ];
                    
                    loadingSection.classList.add('hidden');
                    
                    if (query.toLowerCase().includes('error')) {
                        showError('Could not process your request. Please try a different query.');
                        return;
                    }
                    
                    displayResults(mockResponse);
                }, 2000);
            }
            
            // Event listeners
            searchBtn.addEventListener('click', function() {
                const query = musicQueryInput.value.trim();
                
                if (query === '') {
                    showError('Please enter a music query');
                    return;
                }
                
                // Show loading state
                resultsSection.classList.add('hidden');
                errorSection.classList.add('hidden');
                loadingSection.classList.remove('hidden');
                
                // Start search
                searchMusic(query);
            });
            
            tryAgainBtn.addEventListener('click', function() {
                errorSection.classList.add('hidden');
                musicQueryInput.focus();
            });
            
            // Allow search on Enter key
            musicQueryInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchBtn.click();
                }
            });
            
            // Focus on input when page loads
            musicQueryInput.focus();
        });
    </script>
</body>
</html>